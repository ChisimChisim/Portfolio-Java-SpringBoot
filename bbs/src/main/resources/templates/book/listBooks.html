<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
<meta charset="UTF-8">
<title>Book List</title>
<link th:href="@{/webjars/bootstrap/3.3.7-1/css/bootstrap.min.css}" href="http://cdn.jsdelivr.net/webjars/bootstrap/3.3.7-1/css/bootstrap.css"  rel="stylesheet"  media="screen"/>
    <link rel="stylesheet" th:href="@{/css/style.css}" href="../../static/css/style.css"/>
    <script th:src="@{/webjars/jquery/2.1.4/jquery.min.js}" src="http://cdn.jsdelivr.net/webjars/jquery/2.1.4/jquery.min.js" ></script>
    <script th:src="@{/webjars/bootstrap/3.3.7-1/js/bootstrap.min.js}" src="http://cdn.jsdelivr.net/webjars/bootstrap/3.3.7-1/css/bootstrap.js" ></script>  
</head>
<body>
<div class="container">
  <h1>Book Borrowing System</h1>
  <div class="col-md-12">
  
<!-- Tab Setting -->
<ul class="nav nav-tabs">
  <li class="nav-item">
    <a href="#booklist" class="nav-link bg-warning" data-toggle="tab" >Book list</a>
  </li>
  <li class="nav-item">
    <a href="#currentlist" class="nav-link bg-warning" data-toggle="tab" >My current borrowing</a>
  </li>
  <li class="nav-item">
    <a class="nav-link bg-warning">My history</a>
  </li>
</ul>

<!-- Tab content -->
<div class="tab-content">
<!-- Tab content (Book list) start -->   
<div id="booklist" class="tab-pane active in  active">
<h3>Book list</h3>
       <table class="table table-hover table-bordered table-condensed">
            <tr class="bg-color-gray">
              <th>Book No.</th>
              <th>Title</th>
              <th>Average rating</th>
              <th>Genre</th>
              <th>Author</th>
              <th>Released date</th>
              <th>Status</th>
            </tr>
            <tr th:each="bookInfo : ${books}">
               <td>
                 <span th:text="${bookInfo.book.bookId}"></span>
               </td> 
               <td>
                  <span th:text="${bookInfo.book.title}"></span>
               </td> 
               <td  align="center">
               <form th:action="@{'/books/' + ${bookInfo.book.bookId}}" method="get" >
                   <span th:text="${bookInfo.aveRate}" class="booklist1"></span>
                   <input type="submit" class="btn btn-default btn-sm btn-outline-primary" value="check reviews"/>
               </form>
               </td> 
               <td>
                 <span th:text="${bookInfo.book.genru}"></span>
               </td> 
               <td>
                 <span th:text="${bookInfo.book.author}"></span>
               </td> 
               <td>
                 <span th:text="${bookInfo.book.releasedDate}"></span>
               </td> 
               <td align="center">
                 <span th:if="${bookInfo.book.bookStatus.status=='1'}"> 
                   <button class="btn btn-primary" data-toggle="modal" data-target="#modal-confirm">
                   Check-out
                   </button>
                   </span>
                 <span th:if="${bookInfo.book.bookStatus.status=='0'}"> Unavailable</span>
                 
           <!-- modal Setting -->
                 <div class="modal modal-lg" id="modal-confirm" tabindex="-1">
                     <div class="modal-dialog">
                        <div class="modal-content">
                            <div class="modal-header">
                                <button type="button" class="close" data-dismiss="modal">
                                    <span aria-hidden="true">&times;</span>
                                </button>
                                <h4 class="modal-title" id="modal-label">Check-out confirmation</h4>
                            </div>
           <!-- modal body -->
                            <div class="modal-body">
                               <table class="table table-bordered">
                                  <tr>
                                    <th class="info col-md-3">Book No.</th>
                                    <td><span th:text="${bookInfo.book.bookId}"></span></td>
                                  </tr>
                                  <tr>
                                    <th class="info col-md-3">Title</th>
                                    <td><span th:text="${bookInfo.book.title}"></span></td>
                                  </tr> 
                                  <tr>
                                    <th class="info col-md-3">Check-out date</th>
                                    <td><span th:text="${checkOutDate}"></span></td>
                                  </tr> 
                                  <tr>
                                    <th class="info col-md-3">Due date</th>
                                    <td><span th:text="${dueDate}"></span></td>
                                  </tr> 
                               </table>    
                             </div>
             <!-- modal footer -->
                           <div class="modal-footer center">
                           <h4>Are you ready to complete the check-out?</h4>
                           <form th:action="@{'/borrowing/' + ${bookInfo.book.bookId} + '/checkout/'}" method="post"> 
                             <input class="btn btn-danger btn-lg center" type="submit" value="Yes"/>
                             <input class="btn btn-default btn-lg center" type="submit" data-dismiss="modal" value="No"/>                    
                           </form>
                           </div>
                        </div>
                     </div>
                   </div>
               </td> 
            </tr>
         </table>
</div>         
<!-- Tab content (Book list) end -->   
  
<!-- Tab content (My current borrowing) start --> 
<div id="currentlist" class="tab-pane fade">
<h3>My current borrowing</h3>
   <table class="table table-hover table-bordered table-condensed">
            <tr class="bg-color-gray">
              <th>Borrowing No.</th>
              <th>Book No.</th>
              <th>Title</th>
              <th>Borrowing date</th>
              <th>Due date</th>
              <th></th>
            </tr>
            <tr th:each="currentBorrowing : ${currentBorrowings}">
               <td>
                 <span th:text="${currentBorrowing.borrowingId}"></span>
               </td> 
               <td>
                 <span th:text="${currentBorrowing.book.bookId}"></span>  
               </td> 
               <td>
                 <span th:text="${currentBorrowing.book.title}"></span>  
               </td> 
               <td>
                 <span th:text="${currentBorrowing.borrowingDate}"></span>  
               </td>
               <td>
                 <span th:text="${currentBorrowing.dueDate}"></span>  
               </td>  
               <td>
                  <input class="btn btn-primary" type="submit" value="Return"/>      
               </td>
            </tr>
   </table>   
</div>
<!-- Tab content (Book list) end --> 
  </div>
</div>
</div>
</body>
</html>